language: python
python:
- '3.6'
addons:
- postgresql: '9.5'
env:
- DATABASE_URL=postgres://postgres@localhost/travisdb
before_install:
- export DJANGO_SETTINGS_MODULE=DinDinAPI.settings
- export PYTHONPATH=$HOME/builds/flyiniggle/DinDinAPI
- export PIP_USE_MIRRORS=true
install:
- pip install -r requirements.txt
before_script:
- psql -c "CREATE DATABASE travisdb;" -U postgres
script:
- python manage.py migrate
- coverage run manage.py test --pattern="*Test.py"
after_success:
- coveralls
deploy:
  provider: heroku
  api_key:
    secure: HE+QQNb2Jb1RJDvZVrTC2JcsFcPjJ3Kmfd0qNKNuTct4mbmpJuR/AWVxpTeNyb1EWehErARR6S6Au+JuRw83eX+heSYaK2NCrkWyDRun6BsrpYR2mMHgJHN03mh2KPYOKJiXkIGwJREskojH0xUn7aJjCCH9FUiBBpEapwC/nrnWecux3pqyAkoZffRiyCNd6Go/B7vOMntiSmHyY1nYsIR7uxmfcTcqCgs9qVjO5ZyzRbV9As65/t4+KPhfBQD7Ph3r49x+jaj6Ct1Dj1n96da1kjnoBpfY+nE/5QqvLQD63UsoIBQQx1Q5O5D39Ie3AHr6l7qZoXAAp9zZyCPWk9nVrjfqo+I+OHHD0XS2Y+mEXN/XY8vGv/8VquPbqmGtGo9dA+o4aFvQaEAQYXPb+MgwZYzqfP/nGb0hkTJSR26zmH3mxJL0ND5PJS6Sr28za5LvhGeGASPUD126cLaSH+WSX6hYQyfSoYpjta5xRs8idngTuQ+/16+FZqKWIXvGD84ju60P6iidV9/xIriPjiJ740GGsVKUuDpnE4thU1uLSrrtCx5El209d5a4yEh5pV45332/2oyvNN1njreUphGyXu3apquRKzbPwpgCPk3bfe6KLbXHtRwnvuyd9pbKJJRF5PzWKlSZSDEqPFfpK4hHvu7g/TgqYZdiPtAgASI=
  app: dindinwebapi-staging
  on:
    repo: flyiniggle/DinDinAPI
  provider: heroku
  api_key:
    secure: jQzduKrIQtZKPvyC30h575CVOkznux7j734qHIoYPBLav0GRq/+0GQEuSoc7ZVOlrp9GSvojdDO9kYfmrkT7Zy1RcMcJXya4AhxeiZzSuApLhpjb/4qi29rqmMjEinGP+vj1X6tAnHKE2B3bK5gv/SbaNPQW/qxcIFcs9WnXyw0soA+flcggHp/X6wcTiH+S/YP1qwyQaRkjnK3kHLUxd2JdJVRAIM3J8GynebmFSKVkhoOLfBA9Z/g1XfAg8muSDkpB8ViH4aX58h6us+Y225xJ55b34nNQFn/788jESpAGXwsB+4M9RjldqxYk/Xedf4BK55W4VmnJ76hWh+9VYz4nDqQOsLnicEpiiahULoRn6pxFxTOTpcdHc38Ae04apPk3Rt4y04l2yoWGuvqfRzChHQco5Xi34o1y/2C+DjE9XNBVG7ZEh+rJuy87tJ38YzZypFbnT227/t8ItcwN7XxoI+ufi8XMwfz7QiFH3StKi6Qu2aFKNyuUqvO7MafdrynwUOFasGSV1i3N0cLGDZuTwhpbaeBbNEMoU4wDDs3WvNphumLCAJzOOhGS5hUZk7iCAg2jsXZHEjzPjwW6tntcTmmNlzgQqKLbB6dcdgfaLqLiFcbCQo3GIKyj1ad6OCd4U2TZQ3/bQjcYK32b8vpfd0XG+nBjeZh9U46/2QY=
  app: dindinwebapi
  on:
    repo: flyiniggle/DinDinAPI
    tags: true
